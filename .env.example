DATABASE_URL=postgres://postgres:postgres@localhost:5432/vespid
API_PORT=3001
API_HOST=0.0.0.0
WEB_PORT=3000
NEXT_PUBLIC_API_BASE=http://localhost:3001
# Web uses this for gateway client WebSocket connections (sessions UI).
NEXT_PUBLIC_GATEWAY_WS_BASE=ws://localhost:3002
API_LOG_LEVEL=info
AUTH_TOKEN_SECRET=change-me
REFRESH_TOKEN_SECRET=change-me
OAUTH_STATE_SECRET=change-me
# 32-byte base64 key used for encrypting connector secrets.
SECRETS_KEK_ID=dev-kek-v1
SECRETS_KEK_BASE64=
ACCESS_TOKEN_TTL_SEC=900
SESSION_TTL_SEC=604800
SESSION_COOKIE_NAME=vespid_session
WEB_BASE_URL=http://localhost:3000
# Trial credits automatically granted when a user gets their first personal workspace org.
PERSONAL_TRIAL_CREDITS=100
# strict is the production default; warn is only for short rollout observation windows.
ORG_CONTEXT_ENFORCEMENT=strict
# Optional: set to private enterprise provider package when installed.
VESPID_ENTERPRISE_PROVIDER_MODULE=@vespid-ai/enterprise-provider
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3001/v1/auth/oauth/google/callback
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=http://localhost:3001/v1/auth/oauth/github/callback

# Advanced: connect Google Cloud / Vertex AI (OAuth) as a BYOK LLM provider.
# Redirect URI must be static and match Google Cloud Console exactly.
GOOGLE_VERTEX_CLIENT_ID=
GOOGLE_VERTEX_CLIENT_SECRET=
GOOGLE_VERTEX_REDIRECT_URI=http://localhost:3001/v1/llm/vertex/callback
REDIS_URL=redis://localhost:6379
WORKFLOW_QUEUE_NAME=workflow-runs
WORKFLOW_CONTINUATION_QUEUE_NAME=workflow-continuations
# Polling interval for gateway result reads when a run is blocked on remote execution.
WORKFLOW_CONTINUATION_POLL_MS=2000
# Concurrency for continuation polling workers (independent from WORKFLOW_QUEUE_CONCURRENCY).
WORKFLOW_CONTINUATION_CONCURRENCY=10
WORKFLOW_QUEUE_CONCURRENCY=5
WORKFLOW_RETRY_ATTEMPTS=3
WORKFLOW_RETRY_BACKOFF_MS=5000
# Optional override for connector executors in tests/dev.
GITHUB_API_BASE_URL=https://api.github.com
# Caps JSON-stringified payload preview stored in workflow_run_events.payload.
WORKFLOW_EVENT_PAYLOAD_MAX_CHARS=4000

# Managed LLM provider keys (used when an agent node does not reference a BYOK secretId).
# These are Vespid-managed keys in production. In local dev you can set your own.
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GEMINI_API_KEY=

# Optional API base overrides for tests/dev.
GEMINI_API_BASE_URL=https://generativelanguage.googleapis.com
VERTEX_API_BASE_URL=

# Stripe credits billing (required to enable top-ups).
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Mapping of credit pack IDs to Stripe price IDs and credits. Example:
# STRIPE_CREDITS_PACKS_JSON={"credits-1m":{"priceId":"price_123","credits":1000000},"credits-5m":{"priceId":"price_456","credits":5000000}}
STRIPE_CREDITS_PACKS_JSON=

# Gateway + node-agent remote execution (dev defaults).
GATEWAY_LOG_LEVEL=info
GATEWAY_AGENT_STALE_MS=60000
# Agent selection strategy: least_in_flight_lru (default) or round_robin
GATEWAY_AGENT_SELECTION=least_in_flight_lru
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT=3002
# Token required by worker -> gateway internal dispatch. Use a strong value in real deployments.
GATEWAY_SERVICE_TOKEN=dev-gateway-token
GATEWAY_HTTP_URL=http://localhost:3002
GATEWAY_WS_URL=ws://localhost:3002/ws
# Stores node execution results for recovery after gateway restarts.
GATEWAY_RESULTS_TTL_SEC=900
# Worker-side timeout for node-agent execution.
NODE_EXEC_TIMEOUT_MS=60000

# Node-agent (local process) example settings. The agent stores config on disk after pairing.
VESPID_API_BASE=http://localhost:3001
VESPID_AGENT_CONFIG_PATH=~/.vespid/agent.json
# Optional: custom CA bundle for connecting to a TLS-terminated gateway over wss://
VESPID_AGENT_TLS_CA_FILE=
# Optional: comma-separated tags reported by the agent in its hello capabilities.
# Control-plane tags are authoritative for routing; reported tags are capability hints only (surfaced as `reportedTags`).
VESPID_AGENT_TAGS=

# Toolset skills (read-only context injection caps for vespid.loop.v1 and codex.sdk.v1 on node hosts).
TOOLSET_SKILLS_MAX_BUNDLES=8
TOOLSET_SKILLS_MAX_CHARS_PER_BUNDLE=20000
TOOLSET_SKILLS_MAX_TOTAL_CHARS=80000

# Node-agent sandbox backend for agent.execute
VESPID_AGENT_EXEC_BACKEND=docker
VESPID_AGENT_WORKDIR_ROOT=~/.vespid/workdir
VESPID_AGENT_DOCKER_IMAGE=node:24-alpine
VESPID_AGENT_DOCKER_NETWORK_DEFAULT=none
VESPID_AGENT_DOCKER_TIMEOUT_MS=30000
VESPID_AGENT_DOCKER_MEMORY_MB=256
VESPID_AGENT_DOCKER_CPUS=1
VESPID_AGENT_DOCKER_PIDS=256
VESPID_AGENT_DOCKER_OUTPUT_MAX_CHARS=65536
# Future hook (enterprise): dynamic sandbox provider module, e.g. e2b.dev adapter.
VESPID_AGENT_SANDBOX_PROVIDER_MODULE=@vespid-ai/e2b-sandbox-provider
