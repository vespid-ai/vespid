{
  "name": "vespid",
  "private": true,
  "license": "Apache-2.0",
  "packageManager": "pnpm@10.29.3",
  "scripts": {
    "build": "pnpm -r --if-present build",
    "dev": "pnpm run deps:repair-if-needed && pnpm run dev:stop && pnpm exec dotenv -e .env -- pnpm --parallel --filter @vespid/api --filter @vespid/web --filter @vespid/worker --filter @vespid/gateway --filter @vespid/scheduler --filter @vespid/engine-runner dev",
    "dev:stop": "pnpm exec dotenv -e .env -- sh -lc 'kill-port 3000 3001 3002 ${WEB_PORT:-3000} ${ENGINE_RUNNER_PORT:-3003}'",
    "dev:restart": "pnpm run dev:stop && pnpm run dev",
    "lint": "pnpm -r --if-present lint",
    "test": "pnpm -r --if-present test",
    "typecheck": "pnpm -r --if-present typecheck",
    "migrate": "pnpm exec dotenv -e .env -- pnpm --filter @vespid/db migrate",
    "migrate:check": "pnpm exec dotenv -e .env -- pnpm --filter @vespid/db migrate:check",
    "db:rollback": "pnpm exec dotenv -e .env -- pnpm --filter @vespid/db rollback",
    "db:start": "sh -lc 'docker compose -f docker/community/postgres.compose.yml up -d || docker-compose -f docker/community/postgres.compose.yml up -d'",
    "db:stop": "sh -lc 'docker compose -f docker/community/postgres.compose.yml down || docker-compose -f docker/community/postgres.compose.yml down'",
    "db:logs": "sh -lc 'docker compose -f docker/community/postgres.compose.yml logs -f postgres || docker-compose -f docker/community/postgres.compose.yml logs -f postgres'",
    "db:ps": "sh -lc 'docker compose -f docker/community/postgres.compose.yml ps || docker-compose -f docker/community/postgres.compose.yml ps'",
    "redis:start": "sh -lc 'docker start vespid-redis >/dev/null 2>&1 || docker run -d --name vespid-redis -p 6379:6379 redis:7-alpine'",
    "redis:stop": "sh -lc 'docker stop vespid-redis >/dev/null 2>&1 || true'",
    "redis:logs": "sh -lc 'docker logs -f vespid-redis'",
    "redis:ps": "sh -lc 'docker ps --filter name=vespid-redis --format \"table {{.Names}}\\t{{.Status}}\\t{{.Ports}}\"'",
    "deps:repair-if-needed": "bash scripts/repair-dev-deps.sh",
    "infra:start": "pnpm run deps:repair-if-needed && pnpm run db:start && pnpm run redis:start && pnpm exec dotenv -e .env -- pnpm --filter @vespid/db migrate",
    "infra:stop": "pnpm run redis:stop && pnpm run db:stop",
    "sync:openclaw-model-catalog": "pnpm exec tsx scripts/sync-openclaw-model-catalog.ts",
    "smoke:channels": "pnpm exec tsx scripts/channel-smoke-matrix.ts",
    "load:channels": "pnpm exec tsx scripts/channel-load-matrix.ts",
    "regression:channels": "pnpm --filter @vespid/gateway exec vitest run src/channels/adapters/core.test.ts src/channels/security.test.ts src/channels/router.test.ts src/channels/manager.test.ts && pnpm --filter @vespid/tests exec vitest run channels-core8.integration.test.ts channels-extended.integration.test.ts channels-auth.integration.test.ts",
    "check:licenses": "node scripts/check-license-spdx.mjs",
    "check:migrations": "node scripts/check-migration-rollbacks.mjs",
    "check:secrets": "bash scripts/check-secrets.sh",
    "sbom:generate": "node scripts/create-sbom.mjs"
  },
  "devDependencies": {
    "@types/node": "^24.3.0",
    "concurrently": "^9.2.1",
    "dotenv-cli": "^11.0.0",
    "kill-port": "^2.0.1",
    "tsx": "^4.21.0",
    "typescript": "^5.9.3",
    "vitest": "^4.0.18"
  },
  "dependencies": {
    "bullmq": "^5.69.1"
  }
}
