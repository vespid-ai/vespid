@import "tailwindcss";

:root {
  /* RGB triples so Tailwind can do rgb(var(--token) / alpha). */
  --surface-0: 246 248 251;
  --surface-1: 255 255 255;
  --surface-2: 250 252 255;
  --surface-3: 244 247 252;
  --surface-glass: 255 255 255;

  --border-subtle: 222 229 240;
  --border-strong: 198 209 226;

  --text: 15 23 42;
  --muted: 71 85 105;

  /* Brand tokens (Copilot/Fluent-ish). */
  --brand: 37 99 235;
  --brand-contrast: 255 255 255;
  --brand-2: 56 189 248;
  --focus: 59 130 246;

  --danger: 239 68 68;
  --warn: 245 158 11;
  --ok: 16 185 129;

  /* Shadow-first elevation ladder. */
  --shadow-1: 0 1px 0 rgb(15 23 42 / 0.03), 0 8px 20px rgb(2 6 23 / 0.05);
  --shadow-2: 0 1px 0 rgb(15 23 42 / 0.04), 0 14px 34px rgb(2 6 23 / 0.08);
  --shadow-3: 0 2px 0 rgb(15 23 42 / 0.05), 0 22px 58px rgb(2 6 23 / 0.12);
  --shadow-inset: inset 0 1px 0 rgb(255 255 255 / 0.70);

  --radius-sm: 10px;
  --radius-md: 14px;
  --radius-lg: 18px;

  /* Compatibility aliases used by existing components. */
  --bg: var(--surface-0);
  --panel: var(--surface-glass);
  --panel-elev: var(--surface-2);
  --border: var(--border-subtle);
  --accent: var(--brand);

  /* Syntax highlighting palette (light). */
  --syntax-bg: 248 250 253;
  --syntax-text: 31 41 55;
  --syntax-comment: 100 116 139;
  --syntax-keyword: 143 63 240;
  --syntax-string: 20 131 92;
  --syntax-number: 190 24 93;
  --syntax-function: 37 99 235;
  --syntax-property: 180 83 9;
  --syntax-operator: 71 85 105;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  color: rgb(var(--text));
  background-color: rgb(var(--surface-0));
}

::selection {
  background: rgb(var(--accent) / 0.25);
}

/* Dark theme (applied via next-themes: html.dark). */
.dark {
  --surface-0: 10 12 18;
  --surface-1: 14 18 28;
  --surface-2: 18 24 38;
  --surface-3: 24 32 50;
  --surface-glass: 14 18 28;

  --border-subtle: 44 56 76;
  --border-strong: 70 88 114;

  --text: 226 232 240;
  --muted: 148 163 184;

  --brand: 56 189 248;
  --brand-contrast: 2 6 23;
  --brand-2: 34 211 238;
  --focus: 56 189 248;

  --danger: 248 113 113;
  --warn: 251 191 36;
  --ok: 52 211 153;

  --shadow-1: 0 1px 0 rgb(0 0 0 / 0.20), 0 10px 26px rgb(0 0 0 / 0.30);
  --shadow-2: 0 1px 0 rgb(0 0 0 / 0.24), 0 18px 44px rgb(0 0 0 / 0.38);
  --shadow-3: 0 2px 0 rgb(0 0 0 / 0.28), 0 26px 70px rgb(0 0 0 / 0.46);
  --shadow-inset: inset 0 1px 0 rgb(255 255 255 / 0.06);

  /* Syntax highlighting palette (dark). */
  --syntax-bg: 16 22 33;
  --syntax-text: 226 232 240;
  --syntax-comment: 148 163 184;
  --syntax-keyword: 167 139 250;
  --syntax-string: 74 222 128;
  --syntax-number: 251 113 133;
  --syntax-function: 125 211 252;
  --syntax-property: 251 191 36;
  --syntax-operator: 148 163 184;
}

/* Subtle grain without external assets. */
.bg-grain {
  background:
    radial-gradient(circle at 1px 1px, rgb(var(--text) / 0.022) 1px, transparent 0),
    radial-gradient(980px 640px at 86% -12%, rgb(var(--brand) / 0.12), transparent 60%),
    radial-gradient(820px 620px at 8% -8%, rgb(var(--brand-2) / 0.1), transparent 58%),
    radial-gradient(980px 700px at 54% 115%, rgb(var(--ok) / 0.07), transparent 62%),
    linear-gradient(rgb(var(--surface-0)), rgb(var(--surface-0)));

  background-attachment: fixed;
  background-repeat: repeat, no-repeat, no-repeat, no-repeat, no-repeat;
  background-size: 18px 18px, auto, auto, auto, auto;
  background-position: 0 0, 0 0, 0 0, 0 0, 0 0;
}

/* Better default text rendering in dense dashboards. */
:where(a) {
  color: inherit;
  text-decoration-color: rgb(var(--border));
  text-underline-offset: 3px;
}

:where(a:hover) {
  text-decoration-color: rgb(var(--accent) / 0.55);
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@layer utilities {
  .ui-selected {
    border-color: rgb(var(--accent) / 0.9) !important;
    background: linear-gradient(180deg, rgb(var(--accent) / 0.24), rgb(var(--accent) / 0.12));
    color: rgb(var(--text)) !important;
    box-shadow:
      0 0 0 1px rgb(var(--accent) / 0.36),
      var(--shadow-1);
  }

  .grid-lines {
    background-image:
      linear-gradient(to right, rgb(var(--border-subtle) / 0.24) 1px, transparent 1px),
      linear-gradient(to bottom, rgb(var(--border-subtle) / 0.24) 1px, transparent 1px);
    background-size: 180px 180px;
    mask-image: radial-gradient(circle at 50% 16%, black 0%, transparent 76%);
  }

  .noise-overlay {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
    background-size: 240px 240px;
    mix-blend-mode: soft-light;
    opacity: 0.22;
  }

  .hero-orb {
    position: absolute;
    border-radius: 999px;
    animation: float-slow 18s ease-in-out infinite;
  }

  .pulse-soft {
    animation: pulse-soft 8s ease-in-out infinite;
  }

  .marketing-title-streak {
    color: rgb(var(--text));
    background:
      radial-gradient(120px 18px at 24px 100%, rgb(var(--brand) / 0.22), transparent 70%),
      radial-gradient(140px 20px at 190px 100%, rgb(var(--brand-2) / 0.20), transparent 72%);
    background-repeat: no-repeat;
    background-size: 340px 28px, 420px 30px;
    background-position: 0 100%, 30% 100%;
    padding-bottom: 10px;
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
  }

  .marketing-wing-veil {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='900' height='420' viewBox='0 0 900 420'%3E%3Cg fill='none' stroke='rgba(37,99,235,0.22)' stroke-width='1.2'%3E%3Cpath d='M-40 360 C 120 230, 220 220, 420 300 S 740 380, 980 270'/%3E%3Cpath d='M-40 332 C 120 210, 240 196, 430 274 S 740 350, 980 250'/%3E%3Cpath d='M-40 304 C 120 192, 252 170, 440 246 S 740 320, 980 230'/%3E%3Cpath d='M-40 276 C 120 172, 264 146, 450 218 S 740 292, 980 212'/%3E%3C/g%3E%3Cg fill='none' stroke='rgba(56,189,248,0.18)' stroke-width='1'%3E%3Cpath d='M-40 392 C 120 264, 230 262, 420 332 S 740 408, 980 298'/%3E%3Cpath d='M-40 248 C 120 152, 280 110, 460 190 S 740 266, 980 194'/%3E%3C/g%3E%3C/svg%3E");
    background-size: 920px 420px;
    background-repeat: repeat;
    mix-blend-mode: multiply;
    opacity: 0.22;
    mask-image: radial-gradient(900px 520px at 50% 10%, black 0%, transparent 68%);
  }
}

@keyframes float-slow {
  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(0, -14px, 0) scale(1.05);
  }
}

@keyframes pulse-soft {
  0%,
  100% {
    opacity: 0.55;
  }
  50% {
    opacity: 1;
  }
}

@keyframes chat-generating-dot {
  0%,
  80%,
  100% {
    transform: translateY(0);
    opacity: 0.35;
  }
  40% {
    transform: translateY(-2px);
    opacity: 1;
  }
}

.chat-bubble-user {
  border-color: rgb(var(--accent) / 0.56);
  background: rgb(var(--accent) / 0.24);
  color: rgb(var(--text));
  box-shadow:
    0 0 0 1px rgb(var(--accent) / 0.1),
    0 10px 20px rgb(var(--accent) / 0.14);
}

.chat-generating-indicator {
  background: linear-gradient(180deg, rgb(var(--accent) / 0.16), rgb(var(--accent) / 0.08));
  box-shadow:
    0 0 0 1px rgb(var(--accent) / 0.16),
    0 6px 14px rgb(var(--accent) / 0.14);
}

.chat-generating-dots {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.chat-generating-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgb(var(--accent));
  animation: chat-generating-dot 1.15s ease-in-out infinite;
}

.chat-generating-dot:nth-child(2) {
  animation-delay: 0.14s;
}

.chat-generating-dot:nth-child(3) {
  animation-delay: 0.28s;
}

.dark .chat-bubble-user {
  border-color: rgb(var(--accent) / 0.62);
  background: rgb(var(--accent) / 0.34);
  box-shadow:
    0 0 0 1px rgb(var(--accent) / 0.18),
    0 12px 24px rgb(var(--accent) / 0.2);
}

.syntax-code {
  background: linear-gradient(180deg, rgb(var(--syntax-bg) / 0.96), rgb(var(--syntax-bg) / 0.88));
}

.syntax-code__header {
  background: linear-gradient(180deg, rgb(var(--surface-1) / 0.75), rgb(var(--surface-1) / 0.45));
}

.syntax-code__pre {
  color: rgb(var(--syntax-text));
}

.syntax-code__content {
  color: rgb(var(--syntax-text));
}

.syntax-code .token.comment,
.syntax-code .token.prolog,
.syntax-code .token.doctype,
.syntax-code .token.cdata {
  color: rgb(var(--syntax-comment));
  font-style: italic;
}

.syntax-code .token.punctuation {
  color: rgb(var(--syntax-operator));
}

.syntax-code .token.property,
.syntax-code .token.tag,
.syntax-code .token.constant,
.syntax-code .token.symbol,
.syntax-code .token.deleted {
  color: rgb(var(--syntax-property));
}

.syntax-code .token.boolean,
.syntax-code .token.number {
  color: rgb(var(--syntax-number));
}

.syntax-code .token.selector,
.syntax-code .token.attr-name,
.syntax-code .token.string,
.syntax-code .token.char,
.syntax-code .token.builtin,
.syntax-code .token.inserted {
  color: rgb(var(--syntax-string));
}

.syntax-code .token.operator,
.syntax-code .token.entity,
.syntax-code .token.url,
.syntax-code .language-css .token.string,
.syntax-code .style .token.string {
  color: rgb(var(--syntax-operator));
}

.syntax-code .token.atrule,
.syntax-code .token.attr-value,
.syntax-code .token.keyword {
  color: rgb(var(--syntax-keyword));
}

.syntax-code .token.function,
.syntax-code .token.class-name {
  color: rgb(var(--syntax-function));
}

.syntax-code .token.regex,
.syntax-code .token.important,
.syntax-code .token.variable {
  color: rgb(var(--syntax-property));
}

.syntax-code .token.bold {
  font-weight: 600;
}

.syntax-code .token.italic {
  font-style: italic;
}
